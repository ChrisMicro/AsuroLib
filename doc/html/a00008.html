<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ASURO Library: i2c.c-Dateireferenz</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ASURO Library
   &#160;<span id="projectnumber">2.80</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Erzeugt von Doxygen 1.8.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Hauptseite</span></a></li>
      <li class="current"><a href="files.html"><span>Dateien</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Auflistung&#160;der&#160;Dateien</span></a></li>
      <li><a href="globals.html"><span>Datei-Elemente</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Funktionen</a>  </div>
  <div class="headertitle">
<div class="title">i2c.c-Dateireferenz</div>  </div>
</div><!--header-->
<div class="contents">

<p>Funktionen zum Emulieren der I2C Bus.<br/>
 Dabei werden die Pins C2 und C3 genutzt als SCL und SDA. Sie sind aber in <a class="el" href="a00019.html" title="Benutzerspezische Definitionen der ASURO Bibliothek.">myasuro.h</a> veraenderbar. Die Verwendung von I2C Bus benoetigt PullUps jeweils 4.7k Ohm.  
<a href="#details">Mehr ...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="a00004_source.html">asuro.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="a00009_source.html">i2c.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include-Abh√§ngigkeitsdiagramm f√ºr i2c.c:</div>
<div class="dyncontent">
<div class="center"><img src="a00040.png" border="0" usemap="#i2c_8c" alt=""/></div>
<map name="i2c_8c" id="i2c_8c">
</map>
</div>
</div>
<p><a href="a00008_source.html">gehe zum Quellcode dieser Datei</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Funktionen</h2></td></tr>
<tr class="memitem:adfa0a56b08e1b36bd8bc3ae554bf4624"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#adfa0a56b08e1b36bd8bc3ae554bf4624">InitI2C</a> (void)</td></tr>
<tr class="memdesc:adfa0a56b08e1b36bd8bc3ae554bf4624"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2C Bus Initialisieren.  <a href="#adfa0a56b08e1b36bd8bc3ae554bf4624"></a><br/></td></tr>
<tr class="separator:adfa0a56b08e1b36bd8bc3ae554bf4624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc3f6123280d57eda2f8eea70e662f18"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#abc3f6123280d57eda2f8eea70e662f18">WriteI2C</a> (unsigned char byte)</td></tr>
<tr class="memdesc:abc3f6123280d57eda2f8eea70e662f18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Daten ueber I2C schreiben.  <a href="#abc3f6123280d57eda2f8eea70e662f18"></a><br/></td></tr>
<tr class="separator:abc3f6123280d57eda2f8eea70e662f18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a443731431c829d18fd6937652fc2a247"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#a443731431c829d18fd6937652fc2a247">ReadI2C</a> (unsigned char ack)</td></tr>
<tr class="memdesc:a443731431c829d18fd6937652fc2a247"><td class="mdescLeft">&#160;</td><td class="mdescRight">Daten aus I2C Bus lesen.  <a href="#a443731431c829d18fd6937652fc2a247"></a><br/></td></tr>
<tr class="separator:a443731431c829d18fd6937652fc2a247"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a399a9027813f17cccb71b601d265c31e"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#a399a9027813f17cccb71b601d265c31e">StartI2C</a> (unsigned char device)</td></tr>
<tr class="memdesc:a399a9027813f17cccb71b601d265c31e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Datenaustausch starten.  <a href="#a399a9027813f17cccb71b601d265c31e"></a><br/></td></tr>
<tr class="separator:a399a9027813f17cccb71b601d265c31e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d356873f4a3abafb7687a2ca57663c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00008.html#a7d356873f4a3abafb7687a2ca57663c7">StopI2C</a> (void)</td></tr>
<tr class="memdesc:a7d356873f4a3abafb7687a2ca57663c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Datenaustausch Stoppen.  <a href="#a7d356873f4a3abafb7687a2ca57663c7"></a><br/></td></tr>
<tr class="separator:a7d356873f4a3abafb7687a2ca57663c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Ausf√ºhrliche Beschreibung</h2>
<div class="textblock"><p>Funktionen zum Emulieren der I2C Bus.<br/>
 Dabei werden die Pins C2 und C3 genutzt als SCL und SDA. Sie sind aber in <a class="el" href="a00019.html" title="Benutzerspezische Definitionen der ASURO Bibliothek.">myasuro.h</a> veraenderbar. Die Verwendung von I2C Bus benoetigt PullUps jeweils 4.7k Ohm. </p>
<dl class="section see"><dt>Siehe auch</dt><dd>Defines fuer die I2C in <a class="el" href="a00004.html" title="Definitionen und Funktionen der ASURO Bibliothek.">asuro.h</a><br/>
</dd></dl>
<dl class="section version"><dt>Version</dt><dd>V001 - 17.02.2006 - Rizqi Ahmad (raid_ox)<br/>
 Original Version </dd>
<dd>
V002 - 18.02.2006 - Sternthaler<br/>
 Keine Codeaenderung.<br/>
 Austausch der TAB's gegen BLANK's. </dd></dl>

<p>Definiert in Datei <a class="el" href="a00008_source.html">i2c.c</a>.</p>
</div><h2 class="groupheader">Dokumentation der Funktionen</h2>
<a class="anchor" id="adfa0a56b08e1b36bd8bc3ae554bf4624"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitI2C </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>I2C Bus Initialisieren. </p>
<dl class="section see"><dt>Siehe auch</dt><dd><a class="el" href="a00009.html#a9d869494fd825e8faea34ff8d8828c86">SDA_HI</a>, SCLHI</dd></dl>
<dl class="section user"><dt>Funktionsweise:</dt><dd>Schaltet PC2 und PC3 als Ausgang. und Setze die Pins als High </dd></dl>

<p>Definiert in Zeile <a class="el" href="a00008_source.html#l00042">42</a> der Datei <a class="el" href="a00008_source.html">i2c.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="a00009.html#a16bb6708250d17ee2118d29e4865a653">SDA_DDR</a> |= (1 &lt;&lt; <a class="code" href="a00009.html#a6890442e1cc24a0d61597a13576b8727">SDA</a>);        </div>
<div class="line">  <a class="code" href="a00009.html#a5020a160f5b8f0a1697cfadbe778424b">SCL_DDR</a> |= (1 &lt;&lt; <a class="code" href="a00009.html#ab5ffc4751921608954bb7a5687566b2d">SCL</a>);        </div>
<div class="line">  <a class="code" href="a00009.html#a9d869494fd825e8faea34ff8d8828c86">SDA_HI</a>;             </div>
<div class="line">  <a class="code" href="a00009.html#a4b5159cadba617a0d6dbb6728a0eff57">SCL_HI</a>;             </div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a443731431c829d18fd6937652fc2a247"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char ReadI2C </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>ack</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Daten aus I2C Bus lesen. </p>
<dl class="params"><dt>Parameter</dt><dd>
  <table class="params">
    <tr><td class="paramname">ack</td><td>NAK oder ACK</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>R√ºckgabe</dt><dd>erhaltene Daten</dd></dl>
<dl class="section see"><dt>Siehe auch</dt><dd><a class="el" href="a00009.html#a9d869494fd825e8faea34ff8d8828c86">SDA_HI</a>, <a class="el" href="a00009.html#a6b26531e9d698e80b793be8f1a760633">SDA_LO</a>, <a class="el" href="a00009.html#a4b5159cadba617a0d6dbb6728a0eff57">SCL_HI</a>, <a class="el" href="a00009.html#a44543a9be6cb1c221137bd8f774df69f">SCL_TOGGLE</a>, <a class="el" href="a00009.html#a75aea9b6d58e7eb9563a6e3692c938d7">HDEL</a> </dd></dl>

<p>Definiert in Zeile <a class="el" href="a00008_source.html#l00109">109</a> der Datei <a class="el" href="a00008_source.html">i2c.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> i, byte = 0;</div>
<div class="line">  </div>
<div class="line">  <a class="code" href="a00009.html#a9d869494fd825e8faea34ff8d8828c86">SDA_HI</a>;</div>
<div class="line">  <a class="code" href="a00009.html#a16bb6708250d17ee2118d29e4865a653">SDA_DDR</a> &amp;= ~(1 &lt;&lt; <a class="code" href="a00009.html#a6890442e1cc24a0d61597a13576b8727">SDA</a>);</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">for</span> (i=0; i&lt;8; i++)</div>
<div class="line">  {</div>
<div class="line">  <a class="code" href="a00009.html#a75aea9b6d58e7eb9563a6e3692c938d7">HDEL</a>;</div>
<div class="line">    <a class="code" href="a00009.html#a4b5159cadba617a0d6dbb6728a0eff57">SCL_HI</a>;</div>
<div class="line">    byte &lt;&lt;= 1;</div>
<div class="line">    byte |= (<a class="code" href="a00009.html#a526d580d324bce60a3e964066fae77e3">SDA_PIN</a> &amp; (1 &lt;&lt; <a class="code" href="a00009.html#a6890442e1cc24a0d61597a13576b8727">SDA</a>)) &gt;&gt; <a class="code" href="a00009.html#a6890442e1cc24a0d61597a13576b8727">SDA</a>;</div>
<div class="line">    <a class="code" href="a00009.html#a75aea9b6d58e7eb9563a6e3692c938d7">HDEL</a>;</div>
<div class="line">    <a class="code" href="a00009.html#ab69f13e5dfa3f0378b9c5dfcb6be7870">SCL_LO</a>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00009.html#a16bb6708250d17ee2118d29e4865a653">SDA_DDR</a> |= (1 &lt;&lt; <a class="code" href="a00009.html#a6890442e1cc24a0d61597a13576b8727">SDA</a>);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (ack)</div>
<div class="line">    <a class="code" href="a00009.html#a6b26531e9d698e80b793be8f1a760633">SDA_LO</a>;                             <span class="comment">// ack</span></div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    <a class="code" href="a00009.html#a9d869494fd825e8faea34ff8d8828c86">SDA_HI</a>;                             <span class="comment">// nak</span></div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00009.html#a44543a9be6cb1c221137bd8f774df69f">SCL_TOGGLE</a>;</div>
<div class="line">  <a class="code" href="a00009.html#a9d869494fd825e8faea34ff8d8828c86">SDA_HI</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> byte;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a399a9027813f17cccb71b601d265c31e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char StartI2C </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Datenaustausch starten. </p>
<dl class="params"><dt>Parameter</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>Addresse der I2C Ger‰t</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>R√ºckgabe</dt><dd>antwort </dd></dl>

<p>Definiert in Zeile <a class="el" href="a00008_source.html#l00153">153</a> der Datei <a class="el" href="a00008_source.html">i2c.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="a00009.html#a4b22ba2f26e18d7a0b9b8d91c9ff1cb8">I2C_START</a>;</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="a00008.html#abc3f6123280d57eda2f8eea70e662f18" title="Daten ueber I2C schreiben.">WriteI2C</a> (device);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7d356873f4a3abafb7687a2ca57663c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StopI2C </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Datenaustausch Stoppen. </p>

<p>Definiert in Zeile <a class="el" href="a00008_source.html#l00168">168</a> der Datei <a class="el" href="a00008_source.html">i2c.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="a00009.html#a6b26531e9d698e80b793be8f1a760633">SDA_LO</a>;</div>
<div class="line">  <a class="code" href="a00009.html#ae97924b7877c5f26955e82ab97470b95">I2C_STOP</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abc3f6123280d57eda2f8eea70e662f18"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char WriteI2C </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>byte</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Daten ueber I2C schreiben. </p>
<dl class="params"><dt>Parameter</dt><dd>
  <table class="params">
    <tr><td class="paramname">byte</td><td>daten</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>R√ºckgabe</dt><dd>antwort</dd></dl>
<dl class="section see"><dt>Siehe auch</dt><dd><a class="el" href="a00009.html#a9d869494fd825e8faea34ff8d8828c86">SDA_HI</a>, <a class="el" href="a00009.html#a6b26531e9d698e80b793be8f1a760633">SDA_LO</a>, <a class="el" href="a00009.html#a4b5159cadba617a0d6dbb6728a0eff57">SCL_HI</a>, <a class="el" href="a00009.html#a44543a9be6cb1c221137bd8f774df69f">SCL_TOGGLE</a>, <a class="el" href="a00009.html#a75aea9b6d58e7eb9563a6e3692c938d7">HDEL</a> </dd></dl>

<p>Definiert in Zeile <a class="el" href="a00008_source.html#l00066">66</a> der Datei <a class="el" href="a00008_source.html">i2c.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> i;</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">for</span> (i=8; i&gt;0; i--)</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">if</span> ( byte &amp; (1&lt;&lt;(i-1)) )</div>
<div class="line">      <a class="code" href="a00009.html#a9d869494fd825e8faea34ff8d8828c86">SDA_HI</a>;</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">      <a class="code" href="a00009.html#a6b26531e9d698e80b793be8f1a760633">SDA_LO</a>;         </div>
<div class="line">    <a class="code" href="a00009.html#a44543a9be6cb1c221137bd8f774df69f">SCL_TOGGLE</a>;         </div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="a00009.html#a9d869494fd825e8faea34ff8d8828c86">SDA_HI</a>;             </div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00009.html#a16bb6708250d17ee2118d29e4865a653">SDA_DDR</a> &amp;= ~(1 &lt;&lt; <a class="code" href="a00009.html#a6890442e1cc24a0d61597a13576b8727">SDA</a>);</div>
<div class="line">  <a class="code" href="a00009.html#a75aea9b6d58e7eb9563a6e3692c938d7">HDEL</a>;</div>
<div class="line">  <a class="code" href="a00009.html#a4b5159cadba617a0d6dbb6728a0eff57">SCL_HI</a>;</div>
<div class="line">  byte = <a class="code" href="a00009.html#a526d580d324bce60a3e964066fae77e3">SDA_PIN</a> &amp; (1 &lt;&lt; <a class="code" href="a00009.html#a6890442e1cc24a0d61597a13576b8727">SDA</a>);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00009.html#a75aea9b6d58e7eb9563a6e3692c938d7">HDEL</a>;</div>
<div class="line">  <a class="code" href="a00009.html#ab69f13e5dfa3f0378b9c5dfcb6be7870">SCL_LO</a>;</div>
<div class="line">  <a class="code" href="a00009.html#a16bb6708250d17ee2118d29e4865a653">SDA_DDR</a> |= (1 &lt;&lt; <a class="code" href="a00009.html#a6890442e1cc24a0d61597a13576b8727">SDA</a>);</div>
<div class="line">  <a class="code" href="a00009.html#a75aea9b6d58e7eb9563a6e3692c938d7">HDEL</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> (byte == 0);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Erzeugt am Mit Nov 27 2013 22:55:08 f√ºr ASURO Library von &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
